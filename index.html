<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AluSmart Demo</title>
    <style>
        /* CSS: ‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤ */
        body { font-family: 'Sarabun', sans-serif; background-color: #f4f7f6; padding: 20px; }
        .container { max-width: 1000px; margin: 0 auto; }
        
        /* Input Section */
        .card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .input-group { display: flex; gap: 10px; flex-wrap: wrap; align-items: end; }
        .field { display: flex; flex-direction: column; }
        label { font-size: 14px; color: #666; margin-bottom: 5px; }
        input, select { padding: 10px; border: 1px solid #ddd; border-radius: 4px; width: 100px; }
        button { padding: 10px 20px; background-color: #2ecc71; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; }
        button:hover { background-color: #27ae60; }

        /* Output Grid */
        .output-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        h3 { margin-top: 0; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        
        .doc-box { background: white; padding: 20px; border-radius: 8px; border-left: 5px solid #ddd; font-size: 14px; }
        .doc-quote { border-left-color: #3498db; } /* ‡∏™‡∏µ‡∏ü‡πâ‡∏≤ ‡πÉ‡∏ö‡πÄ‡∏™‡∏ô‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤ */
        .doc-production { border-left-color: #e67e22; } /* ‡∏™‡∏µ‡∏™‡πâ‡∏° ‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ú‡∏•‡∏¥‡∏ï */
        
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { text-align: left; padding: 8px; border-bottom: 1px solid #eee; }
        .total-row { font-weight: bold; background-color: #f9f9f9; }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

<div class="container">
    <div class="card">
        <h2>üõ†Ô∏è ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏•‡∏π‡∏°‡∏¥‡πÄ‡∏ô‡∏µ‡∏¢‡∏° (Demo)</h2>
        <div class="input-group">
            <div class="field">
                <label>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö</label>
                <select id="productSelect">
                    <option value="sliding2">‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏ö‡∏≤‡∏ô‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏™‡∏•‡∏±‡∏ö (2 ‡∏ö‡∏≤‡∏ô)</option>
                </select>
            </div>
            <div class="field">
                <label>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á (‡∏ã‡∏°.)</label>
                <input type="number" id="widthVal" value="120">
            </div>
            <div class="field">
                <label>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á (‡∏ã‡∏°.)</label>
                <input type="number" id="heightVal" value="110">
            </div>
            <div class="field">
                <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (‡∏ä‡∏∏‡∏î)</label>
                <input type="number" id="qtyVal" value="1">
            </div>
            <button onclick="calculateJob()">üöÄ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</button>
        </div>
    </div>

    <div class="output-grid">
        
        <div class="doc-box doc-quote">
            <h3>üìÑ ‡πÉ‡∏ö‡πÄ‡∏™‡∏ô‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤)</h3>
            <p>‡πÄ‡∏£‡∏µ‡∏¢‡∏ô: ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ú‡∏π‡πâ‡∏°‡∏µ‡∏≠‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏∞‡∏Ñ‡∏∏‡∏ì</p>
            <table id="quoteTable">
                </table>
        </div>

        <div class="doc-box doc-production">
            <h3>üî® ‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ï‡∏±‡∏î/‡∏ú‡∏•‡∏¥‡∏ï (‡∏ä‡πà‡∏≤‡∏á)</h3>
            <p>Project: ‡∏ö‡πâ‡∏≤‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ A</p>
            <table id="cutTable">
                <thead>
                    <tr><th>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î</th><th>‡∏™‡∏π‡∏ï‡∏£(‡∏ã‡∏°.)</th><th>‡∏ï‡∏±‡∏î‡∏à‡∏£‡∏¥‡∏á(‡∏ã‡∏°.)</th><th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th></tr>
                </thead>
                <tbody id="cutTableBody">
                    </tbody>
            </table>
        </div>

    </div>
</div>

<script>
    // --- DATA: ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Database ---
    const formulas = [
        { name: "‡πÄ‡∏ü‡∏£‡∏°‡∏ö‡∏ô", type: "profile", price: 150, formula: "W", qty: "1" },
        { name: "‡πÄ‡∏ü‡∏£‡∏°‡∏Ç‡πâ‡∏≤‡∏á", type: "profile", price: 150, formula: "H", qty: "2" },
        { name: "‡πÄ‡∏ü‡∏£‡∏°‡∏•‡πà‡∏≤‡∏á", type: "profile", price: 150, formula: "W", qty: "1" },
        { name: "‡∏Å‡∏£‡∏≠‡∏ö‡∏ö‡∏≤‡∏ô", type: "profile", price: 180, formula: "(W/2)+2.5", qty: "4" }, // ‡∏ö‡∏ô2 ‡∏•‡πà‡∏≤‡∏á2
        { name: "‡πÄ‡∏™‡∏≤‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß", type: "profile", price: 180, formula: "H-3.5", qty: "4" }, // ‡∏ã‡πâ‡∏≤‡∏¢2 ‡∏Ç‡∏ß‡∏≤2
        { name: "‡∏Å‡∏£‡∏∞‡∏à‡∏Å", type: "glass", price: 500, formula: "((W/2)-9)*(H-9)", qty: "2" } // ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà
    ];

    // --- LOGIC: ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì ---
    function calculateJob() {
        // 1. ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
        const W = parseFloat(document.getElementById('widthVal').value);
        const H = parseFloat(document.getElementById('heightVal').value);
        const QTY = parseFloat(document.getElementById('qtyVal').value);

        let totalCost = 0;
        let cutHtml = "";
        
        // 2. ‡∏ß‡∏ô‡∏•‡∏π‡∏õ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡∏≤‡∏°‡∏™‡∏π‡∏ï‡∏£
        formulas.forEach(item => {
            // Parser: ‡πÅ‡∏ó‡∏ô‡∏Ñ‡πà‡∏≤ W, H ‡∏•‡∏á‡πÉ‡∏ô‡∏™‡∏π‡∏ï‡∏£
            let formulaStr = item.formula.replace(/W/g, W).replace(/H/g, H);
            
            // Calculate: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç (‡πÉ‡∏ä‡πâ eval ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö demo)
            let sizeResult = eval(formulaStr); 
            let itemQty = eval(item.qty) * QTY;

            // Costing (‡∏Ñ‡∏¥‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏£‡πà‡∏≤‡∏ß‡πÜ)
            let cost = 0;
            if(item.type === 'profile') {
                cost = (sizeResult / 100) * item.price * itemQty; // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏°‡∏ï‡∏£
                cutHtml += `<tr><td>${item.name}</td><td>${item.formula}</td><td><strong>${sizeResult.toFixed(1)}</strong></td><td>${itemQty}</td></tr>`;
            } else if (item.type === 'glass') {
                cost = (sizeResult / 10000) * item.price * itemQty; // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô ‡∏ï‡∏£.‡∏°.
                cutHtml += `<tr style="color:blue"><td>${item.name}</td><td>‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà</td><td>${(sizeResult/10000).toFixed(2)} ‡∏ï‡∏£.‡∏°.</td><td>${itemQty}</td></tr>`;
            }
            totalCost += cost;
        });

        // 3. ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏á‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á (DOM Manipulation)
        
        // ‡∏™‡πà‡∏ß‡∏ô Production Order
        document.getElementById('cutTableBody').innerHTML = cutHtml;

        // ‡∏™‡πà‡∏ß‡∏ô Quotation (‡∏ö‡∏ß‡∏Å‡∏Å‡∏≥‡πÑ‡∏£ 30%)
        const sellingPrice = totalCost * 1.3;
        const quoteHtml = `
            <tr>
                <td>‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏ö‡∏≤‡∏ô‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô (${W} x ${H} ‡∏ã‡∏°.)</td>
                <td>${QTY} ‡∏ä‡∏∏‡∏î</td>
                <td style="text-align:right">${sellingPrice.toLocaleString(undefined, {minimumFractionDigits: 2})} ‡∏ö‡∏≤‡∏ó</td>
            </tr>
            <tr class="total-row">
                <td colspan="2">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°‡∏™‡∏∏‡∏ó‡∏ò‡∏¥</td>
                <td style="text-align:right; color:#e74c3c; font-size:18px;">${sellingPrice.toLocaleString(undefined, {minimumFractionDigits: 2})} ‡∏ö‡∏≤‡∏ó</td>
            </tr>
        `;
        document.getElementById('quoteTable').innerHTML = quoteHtml;
    }
</script>

</body>
</html>
